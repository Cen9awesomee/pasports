{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport MapSvg from '@/assets/map.svg';\nexport default {\n  components: {\n    MapSvg\n  },\n  props: {\n    regionItems: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    pathDataCustomizationMethod: {\n      type: Function,\n      required: true\n    },\n    textDataCustomizationMethod: {\n      type: Function,\n      required: true\n    },\n    zoomOnSelect: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      selectedRegion: null,\n      tooltipVisible: false,\n      tooltipType: 'region',\n      tooltipText: '',\n      tooltipHtml: '',\n      tooltipX: 0,\n      tooltipY: 0,\n      defaultViewBox: '0 0 29252.3 16557.2',\n      currentViewBox: '0 0 29252.3 16557.2',\n      zoomLevel: 1\n    };\n  },\n  computed: {\n    regionStyles() {\n      return this.pathDataCustomizationMethod(this.regionItems);\n    },\n    regionTexts() {\n      return this.textDataCustomizationMethod(this.regionItems);\n    }\n  },\n  mounted() {\n    this.applyStylesAndTexts();\n    this.updateSvgClasses();\n    this.addEventListeners();\n  },\n  methods: {\n    addEventListeners() {\n      const svg = this.$el.querySelector('.svg-map');\n      if (!svg) return;\n      const paths = svg.querySelectorAll('path');\n      paths.forEach(path => {\n        path.addEventListener('click', () => {\n          const regionId = this.getRegionIdFromClass(path);\n          if (regionId) {\n            this.selectRegion(regionId);\n          }\n        });\n        path.addEventListener('mouseenter', event => {\n          const regionId = this.getRegionIdFromClass(path);\n          const region = this.regionItems.find(r => {\n            if (regionId === '1-city') {\n              return String(r.id) === '1-city';\n            }\n            return String(r.id) === regionId;\n          });\n          this.showTooltip(region, event);\n        });\n        path.addEventListener('mouseleave', () => {\n          this.hideTooltip();\n        });\n      });\n      const texts = svg.querySelectorAll('text');\n      texts.forEach(text => {\n        text.addEventListener('click', () => {\n          const regionId = this.getRegionIdFromClass(text);\n          if (regionId) {\n            this.selectRegion(regionId);\n          }\n        });\n        text.addEventListener('mouseenter', event => {\n          const regionId = this.getRegionIdFromClass(text);\n          const region = this.regionItems.find(r => {\n            if (regionId === '1-city') {\n              return String(r.id) === '1-city';\n            }\n            return String(r.id) === regionId;\n          });\n          this.showTooltip(region, event);\n        });\n        text.addEventListener('mouseleave', () => {\n          this.hideTooltip();\n        });\n      });\n    },\n    handleSvgClick(event) {\n      const path = event.target.closest('path');\n      if (path) {\n        const regionId = this.getRegionIdFromClass(path);\n        if (regionId) {\n          this.selectRegion(regionId);\n        }\n      }\n    },\n    handleSvgMouseEnter(event) {\n      const target = event.target.closest('path') || event.target.closest('text');\n      if (target && !target.classList.contains('hidden')) {\n        const regionId = this.getRegionIdFromClass(target);\n        const region = this.regionItems.find(r => {\n          if (regionId === '1-city') {\n            return String(r.id) === '1-city';\n          }\n          return String(r.id) === regionId;\n        });\n        this.showTooltip(region, event);\n      }\n    },\n    getRegionIdFromClass(element) {\n      const classList = element.classList;\n      const filClass = Array.from(classList).find(cls => cls.startsWith('fil'));\n      let regionId = filClass ? filClass.replace('fil', '') : null;\n      if (classList.contains('fnt-city') && regionId) {\n        regionId = `${regionId}-city`;\n      }\n      return regionId;\n    },\n    applyStylesAndTexts() {\n      const svg = this.$el.querySelector('.svg-map');\n      if (!svg) return;\n      const paths = svg.querySelectorAll('path');\n      paths.forEach(path => {\n        const regionId = this.getRegionIdFromClass(path);\n        if (regionId && this.regionStyles[regionId]) {\n          path.style.fill = this.regionStyles[regionId];\n        } else {\n          path.style.fill = '#ccc';\n        }\n      });\n      const texts = svg.querySelectorAll('text');\n      texts.forEach(text => {\n        const regionId = this.getRegionIdFromClass(text);\n        if (regionId && this.regionTexts[regionId]) {\n          text.textContent = this.regionTexts[regionId];\n        } else {\n          text.textContent = '';\n        }\n      });\n    },\n    selectRegion(regionId) {\n      this.selectedRegion = regionId;\n      if (this.zoomOnSelect) {\n        this.centerRegion(regionId);\n      }\n      this.updateSvgClasses();\n      const region = this.regionItems.find(r => {\n        if (regionId === '1-city') {\n          return String(r.id) === '1-city';\n        }\n        return String(r.id) === regionId;\n      });\n      const regionDataId = region ? region.id : null;\n      console.log(`regionId: ${regionId}, regionDataId: ${regionDataId}`);\n      this.$emit('region-selected', regionDataId);\n    },\n    resetToDefault() {\n      this.selectedRegion = null;\n      if (this.zoomOnSelect) {\n        this.currentViewBox = this.defaultViewBox;\n        this.zoomLevel = 1;\n        this.updateSvgViewBox();\n      }\n      this.updateSvgClasses();\n      this.$emit('region-selected', null);\n    },\n    centerRegion(regionId) {\n      const svg = this.$el.querySelector('.svg-map');\n      let path;\n      if (regionId === '1-city') {\n        path = svg.querySelector(`.fil1`);\n      } else {\n        path = svg.querySelector(`.fil${regionId}`);\n      }\n      if (path) {\n        const bbox = path.getBBox();\n        const container = this.$el.querySelector('.map-container');\n        let zoomFactor = regionId === '1-city' ? 3 : 1.7;\n        if (container) {\n          const containerWidth = container.clientWidth;\n          const containerHeight = container.clientHeight;\n          zoomFactor = Math.min(containerWidth / bbox.width, containerHeight / bbox.height);\n        }\n        const newWidth = bbox.width * zoomFactor;\n        const newHeight = bbox.height;\n        const centerX = bbox.x + bbox.width / 2;\n        const centerY = bbox.y + bbox.height / 2;\n        const newX = centerX - newWidth / 2;\n        const newY = centerY - newHeight / 2;\n        this.currentViewBox = `${newX} ${newY} ${newWidth} ${newHeight}`;\n        this.zoomLevel = zoomFactor;\n      }\n    },\n    updateSvgViewBox() {\n      const svg = this.$el.querySelector('.svg-map');\n      if (svg) {\n        svg.setAttribute('viewBox', this.currentViewBox);\n      }\n    },\n    isElementVisible(regionId) {\n      if (this.selectedRegion === null) {\n        return true;\n      }\n      if (regionId === this.selectedRegion) {\n        return true;\n      }\n      if (this.selectedRegion === '1-city' && regionId === '1') {\n        return true;\n      }\n      return false;\n    },\n    updateSvgClasses() {\n      const svg = this.$el.querySelector('.svg-map');\n      if (!svg) return;\n      const isElementVisible = regionId => {\n        if (!this.zoomOnSelect) {\n          return true;\n        }\n        if (this.selectedRegion === null) {\n          return true;\n        }\n        if (regionId === this.selectedRegion) {\n          return true;\n        }\n        if (this.selectedRegion === '1-city' && regionId === '1') {\n          return true;\n        }\n        return false;\n      };\n      const paths = svg.querySelectorAll('path');\n      paths.forEach(path => {\n        const regionId = this.getRegionIdFromClass(path);\n        const shouldBeVisible = isElementVisible(regionId);\n        path.classList.toggle('hidden', !shouldBeVisible);\n        if (!this.zoomOnSelect && regionId === this.selectedRegion) {\n          path.classList.add('selected');\n        } else {\n          path.classList.remove('selected');\n        }\n      });\n      const texts = svg.querySelectorAll('text');\n      texts.forEach(text => {\n        const regionId = this.getRegionIdFromClass(text);\n        const shouldBeVisible = isElementVisible(regionId);\n        if (shouldBeVisible) {\n          text.classList.remove('hidden');\n          if (regionId && this.regionTexts[regionId]) {\n            text.textContent = this.regionTexts[regionId];\n          }\n          if (!this.zoomOnSelect && regionId === this.selectedRegion) {\n            text.classList.add('selected');\n          } else {\n            text.classList.remove('selected');\n          }\n        } else {\n          text.classList.add('hidden');\n        }\n      });\n    },\n    showTooltip(text, event) {\n      if (typeof text === 'string') {\n        this.tooltipType = 'reset';\n        this.tooltipHtml = `<div class=\"tooltip-content\">${text}</div>`;\n        this.tooltipVisible = true;\n        this.tooltipX = event.clientX;\n        this.tooltipY = event.clientY;\n        return;\n      }\n      this.tooltipType = 'region';\n      const region = text;\n      const regionName = region.name;\n      const fertility2023 = region.fertility['2023'];\n      const fertility2024 = region.fertility['2024'];\n      const mortality2023 = region.mortality['2023'];\n      const mortality2024 = region.mortality['2024'];\n      let fertilityTrend = '';\n      let fertilityIconClass = '';\n      const fert2023 = parseFloat(fertility2023);\n      const fert2024 = parseFloat(fertility2024);\n      if (fert2024 < fert2023) {\n        fertilityTrend = '▼';\n        fertilityIconClass = 'fertility-icon';\n      } else {\n        fertilityTrend = '▲';\n        fertilityIconClass = 'mortality-icon';\n      }\n      let mortalityTrend = '';\n      let mortalityIconClass = '';\n      const mortal2023 = parseFloat(mortality2023);\n      const mortal2024 = parseFloat(mortality2024);\n      if (mortal2024 < mortal2023) {\n        mortalityTrend = '▼';\n        mortalityIconClass = 'mortality-icon';\n      } else {\n        mortalityTrend = '▲';\n        mortalityIconClass = 'fertility-icon';\n      }\n      this.tooltipHtml = `\n    <div class=\"tooltip-content\">\n      <div class=\"tooltip-title\">${regionName}</div>\n      <div class=\"tooltip-section\">\n        <span class=\"tooltip-label\">Рождаемость</span><br>\n        <span class=\"tooltip-year\">2023г. - ${fertility2023}</span>\n        <div class=\"tooltip-year-with-icon\">\n          <span class=\"tooltip-year\">2024г. - ${fertility2024}</span>\n          <span class=\"tooltip-icon ${fertilityIconClass}\">${fertilityTrend}</span>\n        </div>\n      </div>\n      <div class=\"tooltip-section\">\n        <span class=\"tooltip-label\">Смертность</span><br>\n        <span class=\"tooltip-year\">2023г. - ${mortality2023}</span>\n        <div class=\"tooltip-year-with-icon\">\n          <span class=\"tooltip-year\">2024г. - ${mortality2024}</span>\n          <span class=\"tooltip-icon ${mortalityIconClass}\">${mortalityTrend}</span>\n        </div>\n      </div>\n    </div>\n  `;\n      this.tooltipVisible = true;\n      this.tooltipX = event.clientX;\n      this.tooltipY = event.clientY;\n    },\n    hideTooltip() {\n      this.tooltipVisible = false;\n      this.tooltipType = 'region';\n    }\n  },\n  watch: {\n    selectedRegion() {\n      this.updateSvgClasses();\n    },\n    regionItems: {\n      handler() {\n        this.applyStylesAndTexts();\n      },\n      deep: true\n    }\n  }\n};","map":{"version":3,"names":["MapSvg","components","props","regionItems","type","Array","required","default","pathDataCustomizationMethod","Function","textDataCustomizationMethod","zoomOnSelect","Boolean","data","selectedRegion","tooltipVisible","tooltipType","tooltipText","tooltipHtml","tooltipX","tooltipY","defaultViewBox","currentViewBox","zoomLevel","computed","regionStyles","regionTexts","mounted","applyStylesAndTexts","updateSvgClasses","addEventListeners","methods","svg","$el","querySelector","paths","querySelectorAll","forEach","path","addEventListener","regionId","getRegionIdFromClass","selectRegion","event","region","find","r","String","id","showTooltip","hideTooltip","texts","text","handleSvgClick","target","closest","handleSvgMouseEnter","classList","contains","element","filClass","from","cls","startsWith","replace","style","fill","textContent","centerRegion","regionDataId","console","log","$emit","resetToDefault","updateSvgViewBox","bbox","getBBox","container","zoomFactor","containerWidth","clientWidth","containerHeight","clientHeight","Math","min","width","height","newWidth","newHeight","centerX","x","centerY","y","newX","newY","setAttribute","isElementVisible","shouldBeVisible","toggle","add","remove","clientX","clientY","regionName","name","fertility2023","fertility","fertility2024","mortality2023","mortality","mortality2024","fertilityTrend","fertilityIconClass","fert2023","parseFloat","fert2024","mortalityTrend","mortalityIconClass","mortal2023","mortal2024","watch","handler","deep"],"sources":["src/components/MapComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"map-container\">\r\n    <MapSvg\r\n      :viewBox=\"currentViewBox\"\r\n      class=\"svg-map\"\r\n      @click=\"handleSvgClick\"\r\n      @mouseenter=\"handleSvgMouseEnter\"\r\n      @mouseleave=\"hideTooltip\"\r\n    />\r\n    <div\r\n       v-if=\"tooltipVisible\"\r\n      class=\"tooltip\"\r\n      :class=\"{ 'tooltip-small': tooltipType === 'reset' }\"\r\n      :style=\"{ right: tooltipX + 'px', top: tooltipY + 'px' }\"\r\n      v-html=\"tooltipHtml\"\r\n  ></div>\r\n    <button \r\n    v-if=\"selectedRegion !== null\" \r\n    class=\"reset-btn\" \r\n    @click=\"resetToDefault\" \r\n    @mouseenter=\"showTooltip('Вся область', $event)\"\r\n    @mouseleave=\"hideTooltip\">\r\n      <i class=\"fa-solid fa-earth-americas\"></i>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MapSvg from '@/assets/map.svg';\r\nexport default {\r\n  components: {\r\n    MapSvg,\r\n  },\r\n  props: {\r\n    regionItems: {\r\n      type: Array,\r\n      required: true,\r\n      default: () => [],\r\n    },\r\n    pathDataCustomizationMethod: {\r\n      type: Function,\r\n      required: true,\r\n    },\r\n    textDataCustomizationMethod: {\r\n      type: Function,\r\n      required: true,\r\n    },\r\n    zoomOnSelect: {\r\n    type: Boolean,\r\n    default: true, \r\n  },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedRegion: null,\r\n      tooltipVisible: false,\r\n      tooltipType: 'region',\r\n      tooltipText: '',\r\n      tooltipHtml: '',\r\n      tooltipX: 0,\r\n      tooltipY: 0,\r\n      defaultViewBox: '0 0 29252.3 16557.2',\r\n      currentViewBox: '0 0 29252.3 16557.2',\r\n      zoomLevel: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    regionStyles() {\r\n      return this.pathDataCustomizationMethod(this.regionItems);\r\n    },\r\n    regionTexts() {\r\n      return this.textDataCustomizationMethod(this.regionItems);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.applyStylesAndTexts();\r\n    this.updateSvgClasses();\r\n    this.addEventListeners();\r\n  },\r\n  methods: {\r\naddEventListeners() {\r\n  const svg = this.$el.querySelector('.svg-map');\r\n  if (!svg) return;\r\n\r\n  const paths = svg.querySelectorAll('path');\r\n  paths.forEach((path) => {\r\n    path.addEventListener('click', () => {\r\n      const regionId = this.getRegionIdFromClass(path);\r\n      if (regionId) {\r\n        this.selectRegion(regionId);\r\n      }\r\n    });\r\n    path.addEventListener('mouseenter', (event) => {\r\n      const regionId = this.getRegionIdFromClass(path);\r\n      const region = this.regionItems.find((r) => {\r\n        if (regionId === '1-city') {\r\n          return String(r.id) === '1-city';\r\n        }\r\n        return String(r.id) === regionId;\r\n      });\r\n      this.showTooltip(region, event);\r\n    });\r\n    path.addEventListener('mouseleave', () => {\r\n      this.hideTooltip();\r\n    });\r\n  });\r\n\r\n  const texts = svg.querySelectorAll('text');\r\n  texts.forEach((text) => {\r\n    text.addEventListener('click', () => {\r\n      const regionId = this.getRegionIdFromClass(text);\r\n      if (regionId) {\r\n        this.selectRegion(regionId);\r\n      }\r\n    });\r\n    text.addEventListener('mouseenter', (event) => {\r\n      const regionId = this.getRegionIdFromClass(text);\r\n      const region = this.regionItems.find((r) => {\r\n        if (regionId === '1-city') {\r\n          return String(r.id) === '1-city';\r\n        }\r\n        return String(r.id) === regionId;\r\n      });\r\n      this.showTooltip(region, event);\r\n    });\r\n    text.addEventListener('mouseleave', () => {\r\n      this.hideTooltip();\r\n    });\r\n  });\r\n},\r\nhandleSvgClick(event) {\r\n      const path = event.target.closest('path');\r\n      if (path) {\r\n        const regionId = this.getRegionIdFromClass(path);\r\n        if (regionId) {\r\n          this.selectRegion(regionId);\r\n        }\r\n      }\r\n    },\r\n    handleSvgMouseEnter(event) {\r\n  const target = event.target.closest('path') || event.target.closest('text');\r\n  if (target && !target.classList.contains('hidden')) {\r\n    const regionId = this.getRegionIdFromClass(target);\r\n    const region = this.regionItems.find((r) => {\r\n      if (regionId === '1-city') {\r\n        return String(r.id) === '1-city';\r\n      }\r\n      return String(r.id) === regionId;\r\n    });\r\n    this.showTooltip(region, event);\r\n  }\r\n},\r\ngetRegionIdFromClass(element) {\r\n      const classList = element.classList;\r\n      const filClass = Array.from(classList).find((cls) => cls.startsWith('fil'));\r\n      let regionId = filClass ? filClass.replace('fil', '') : null;\r\n      if (classList.contains('fnt-city') && regionId) {\r\n        regionId = `${regionId}-city`;\r\n      }\r\n      return regionId;\r\n    },\r\napplyStylesAndTexts() {\r\n      const svg = this.$el.querySelector('.svg-map');\r\n      if (!svg) return;\r\n      const paths = svg.querySelectorAll('path');\r\n      paths.forEach((path) => {\r\n        const regionId = this.getRegionIdFromClass(path);\r\n        if (regionId && this.regionStyles[regionId]) {\r\n          path.style.fill = this.regionStyles[regionId];\r\n        } else {\r\n          path.style.fill = '#ccc'; \r\n        }\r\n      });\r\n      const texts = svg.querySelectorAll('text');\r\n      texts.forEach((text) => {\r\n        const regionId = this.getRegionIdFromClass(text);\r\n        if (regionId && this.regionTexts[regionId]) {\r\n          text.textContent = this.regionTexts[regionId];\r\n        } else {\r\n          text.textContent = '';\r\n        }\r\n      });\r\n    },\r\nselectRegion(regionId) {\r\n  this.selectedRegion = regionId;\r\n  if (this.zoomOnSelect) {\r\n    this.centerRegion(regionId);\r\n  }\r\n  this.updateSvgClasses();\r\n  const region = this.regionItems.find((r) => {\r\n    if (regionId === '1-city') {\r\n      return String(r.id) === '1-city';\r\n    }\r\n    return String(r.id) === regionId;\r\n  });\r\n  const regionDataId = region ? region.id : null;\r\n  console.log(`regionId: ${regionId}, regionDataId: ${regionDataId}`);\r\n  this.$emit('region-selected', regionDataId);\r\n},\r\nresetToDefault() {\r\n  this.selectedRegion = null;\r\n  if (this.zoomOnSelect) {\r\n    this.currentViewBox = this.defaultViewBox;\r\n    this.zoomLevel = 1;\r\n    this.updateSvgViewBox();\r\n  }\r\n  this.updateSvgClasses();\r\n  this.$emit('region-selected', null);\r\n},\r\ncenterRegion(regionId) {\r\n      const svg = this.$el.querySelector('.svg-map');\r\n      let path;\r\n      if (regionId === '1-city') {\r\n        path = svg.querySelector(`.fil1`);\r\n      } else {\r\n        path = svg.querySelector(`.fil${regionId}`);\r\n      }\r\n      if (path) {\r\n        const bbox = path.getBBox();\r\n        const container = this.$el.querySelector('.map-container');\r\n        let zoomFactor = regionId === '1-city' ? 3 : 1.7;\r\n        if (container) {\r\n          const containerWidth = container.clientWidth;\r\n          const containerHeight = container.clientHeight;\r\n          zoomFactor = Math.min(containerWidth / bbox.width, containerHeight / bbox.height);\r\n        }\r\n        const newWidth = bbox.width * zoomFactor;\r\n        const newHeight = bbox.height;\r\n        const centerX = bbox.x + bbox.width / 2;\r\n        const centerY = bbox.y + bbox.height / 2;\r\n        const newX = centerX - newWidth / 2;\r\n        const newY = centerY - newHeight / 2;\r\n        this.currentViewBox = `${newX} ${newY} ${newWidth} ${newHeight}`;\r\n        this.zoomLevel = zoomFactor;\r\n      }\r\n    },\r\nupdateSvgViewBox() {\r\n  const svg = this.$el.querySelector('.svg-map');\r\n  if (svg) {\r\n    svg.setAttribute('viewBox', this.currentViewBox);\r\n  }\r\n},\r\nisElementVisible(regionId) {\r\n      if (this.selectedRegion === null) {\r\n        return true;\r\n      }\r\n      if (regionId === this.selectedRegion) {\r\n        return true;\r\n      }\r\n      if (this.selectedRegion === '1-city' && regionId === '1') {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\nupdateSvgClasses() {\r\n  const svg = this.$el.querySelector('.svg-map');\r\n  if (!svg) return;\r\n  const isElementVisible = (regionId) => {\r\n    if (!this.zoomOnSelect) {\r\n      return true;\r\n    }\r\n    if (this.selectedRegion === null) {\r\n      return true;\r\n    }\r\n    if (regionId === this.selectedRegion) {\r\n      return true;\r\n    }\r\n    if (this.selectedRegion === '1-city' && regionId === '1') {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  const paths = svg.querySelectorAll('path');\r\n  paths.forEach((path) => {\r\n    const regionId = this.getRegionIdFromClass(path);\r\n    const shouldBeVisible = isElementVisible(regionId);\r\n    path.classList.toggle('hidden', !shouldBeVisible);\r\n    if (!this.zoomOnSelect && regionId === this.selectedRegion) {\r\n      path.classList.add('selected');\r\n    } else {\r\n      path.classList.remove('selected');\r\n    }\r\n  });\r\n  const texts = svg.querySelectorAll('text');\r\n  texts.forEach((text) => {\r\n    const regionId = this.getRegionIdFromClass(text);\r\n    const shouldBeVisible = isElementVisible(regionId);\r\n    if (shouldBeVisible) {\r\n      text.classList.remove('hidden');\r\n      if (regionId && this.regionTexts[regionId]) {\r\n        text.textContent = this.regionTexts[regionId];\r\n      }\r\n      if (!this.zoomOnSelect && regionId === this.selectedRegion) {\r\n        text.classList.add('selected');\r\n      } else {\r\n        text.classList.remove('selected');\r\n      }\r\n    } else {\r\n      text.classList.add('hidden');\r\n    }\r\n  });\r\n},\r\nshowTooltip(text, event) {\r\n  if (typeof text === 'string') {\r\n    this.tooltipType = 'reset';\r\n    this.tooltipHtml = `<div class=\"tooltip-content\">${text}</div>`;\r\n    this.tooltipVisible = true;\r\n    this.tooltipX = event.clientX;\r\n    this.tooltipY = event.clientY;\r\n    return;\r\n  }\r\n\r\n  this.tooltipType = 'region';\r\n  const region = text;\r\n  const regionName = region.name;\r\n  const fertility2023 = region.fertility['2023'];\r\n  const fertility2024 = region.fertility['2024'];\r\n  const mortality2023 = region.mortality['2023'];\r\n  const mortality2024 = region.mortality['2024'];\r\n\r\n  let fertilityTrend = '';\r\n  let fertilityIconClass = '';\r\n  const fert2023 = parseFloat(fertility2023);\r\n  const fert2024 = parseFloat(fertility2024);\r\n  if (fert2024 < fert2023) {\r\n    fertilityTrend = '▼';\r\n    fertilityIconClass = 'fertility-icon';\r\n  } else {\r\n    fertilityTrend = '▲';\r\n    fertilityIconClass = 'mortality-icon';\r\n  }\r\n\r\n  let mortalityTrend = '';\r\n  let mortalityIconClass = '';\r\n  const mortal2023 = parseFloat(mortality2023);\r\n  const mortal2024 = parseFloat(mortality2024);\r\n  if (mortal2024 < mortal2023) {\r\n    mortalityTrend = '▼';\r\n    mortalityIconClass = 'mortality-icon';\r\n  } else {\r\n    mortalityTrend = '▲';\r\n    mortalityIconClass = 'fertility-icon';\r\n  }\r\n\r\n  this.tooltipHtml = `\r\n    <div class=\"tooltip-content\">\r\n      <div class=\"tooltip-title\">${regionName}</div>\r\n      <div class=\"tooltip-section\">\r\n        <span class=\"tooltip-label\">Рождаемость</span><br>\r\n        <span class=\"tooltip-year\">2023г. - ${fertility2023}</span>\r\n        <div class=\"tooltip-year-with-icon\">\r\n          <span class=\"tooltip-year\">2024г. - ${fertility2024}</span>\r\n          <span class=\"tooltip-icon ${fertilityIconClass}\">${fertilityTrend}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"tooltip-section\">\r\n        <span class=\"tooltip-label\">Смертность</span><br>\r\n        <span class=\"tooltip-year\">2023г. - ${mortality2023}</span>\r\n        <div class=\"tooltip-year-with-icon\">\r\n          <span class=\"tooltip-year\">2024г. - ${mortality2024}</span>\r\n          <span class=\"tooltip-icon ${mortalityIconClass}\">${mortalityTrend}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  this.tooltipVisible = true;\r\n  this.tooltipX = event.clientX;\r\n  this.tooltipY = event.clientY;\r\n},\r\nhideTooltip() {\r\n      this.tooltipVisible = false;\r\n      this.tooltipType = 'region';\r\n    },\r\n  },\r\n  watch: {\r\nselectedRegion() {\r\n      this.updateSvgClasses();\r\n    },\r\n    regionItems: {\r\n      handler() {\r\n        this.applyStylesAndTexts();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n};\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}